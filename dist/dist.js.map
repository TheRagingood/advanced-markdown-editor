{"version":3,"sources":["../src/index.js"],"names":["document","addEventListener","event","workingNote","permissions","name","componentManager","ComponentManager","ignoreTextChange","initialLoad","lastValue","streamContextItem","note","window","simplemde","content","text","value","codemirror","getDoc","clearHistory","SimpleMDE","element","getElementById","spellChecker","status","toolbar","toggleFullScreen","on","saveItem"],"mappings":";;AAAAA,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,UAASC,KAAT,EAAgB;;AAE5D,MAAIC,WAAJ;;AAEA,MAAIC,cAAc,CAChB;AACEC,UAAM;AADR,GADgB,CAAlB;;AAMA,MAAIC,mBAAmB,IAAIC,gBAAJ,CAAqBH,WAArB,EAAkC,YAAU;AACjE;AACD,GAFsB,CAAvB;;AAIA,MAAII,mBAAmB,KAAvB;AACA,MAAIC,cAAc,IAAlB;AACA,MAAIC,SAAJ;;AAEAJ,mBAAiBK,iBAAjB,CAAmC,UAACC,IAAD,EAAU;;AAE3CT,kBAAcS,IAAd;;AAEA,QAAG,CAACC,OAAOC,SAAX,EAAsB;AACpB;AACD;;AAED,QAAGF,KAAKG,OAAL,CAAaC,IAAb,KAAsBN,SAAzB,EAAoC;AAClCF,yBAAmB,IAAnB;AACAK,aAAOC,SAAP,CAAiBG,KAAjB,CAAuBL,KAAKG,OAAL,CAAaC,IAApC;AACAR,yBAAmB,KAAnB;AACD;;AAED,QAAGC,WAAH,EAAgB;AACdA,oBAAc,KAAd;AACAI,aAAOC,SAAP,CAAiBI,UAAjB,CAA4BC,MAA5B,GAAqCC,YAArC;AACD;AACF,GAlBD;;AAoBAP,SAAOC,SAAP,GAAmB,IAAIO,SAAJ,CAAc;AAC9BC,aAAStB,SAASuB,cAAT,CAAwB,QAAxB,CADqB;AAE9BC,kBAAc,KAFgB;AAG9BC,YAAQ,KAHsB;AAI9BC,aAAQ,CACF,SADE,EACS,MADT,EACiB,QADjB,EAC2B,eAD3B,EAEF,GAFE,EAEG,OAFH,EAEY,MAFZ,EAGF,GAHE,EAGG,gBAHH,EAGqB,cAHrB,EAIF,GAJE,EAIG,aAJH,EAKF,GALE,EAKG,MALH,EAKW,OALX,EAMF,GANE,EAMG,OANH,EAOF,GAPE,EAOG,SAPH,EAOc,cAPd,EAO8B,YAP9B;AAJsB,GAAd,CAAnB;;AAeAb,SAAOC,SAAP,CAAiBa,gBAAjB;;AAEAb,YAAUI,UAAV,CAAqBU,EAArB,CAAwB,QAAxB,EAAkC,YAAU;AAC1C,QAAG,CAACpB,gBAAJ,EAAsB;AACpBE,kBAAYI,UAAUG,KAAV,EAAZ;AACAd,kBAAYY,OAAZ,CAAoBC,IAApB,GAA2BN,SAA3B;AACAJ,uBAAiBuB,QAAjB,CAA0B1B,WAA1B;AACD;AACF,GAND;AAQD,CA/DD","file":"dist.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function(event) {\n\n  var workingNote;\n\n  var permissions = [\n    {\n      name: \"stream-context-item\"\n    }\n  ]\n\n  var componentManager = new ComponentManager(permissions, function(){\n    // on ready\n  });\n\n  var ignoreTextChange = false;\n  var initialLoad = true;\n  var lastValue;\n\n  componentManager.streamContextItem((note) => {\n    \n    workingNote = note;\n\n    if(!window.simplemde) {\n      return;\n    }\n\n    if(note.content.text !== lastValue) {\n      ignoreTextChange = true;\n      window.simplemde.value(note.content.text);\n      ignoreTextChange = false;\n    }\n\n    if(initialLoad) {\n      initialLoad = false;\n      window.simplemde.codemirror.getDoc().clearHistory();\n    }\n  });\n\n  window.simplemde = new SimpleMDE({\n     element: document.getElementById(\"editor\"),\n     spellChecker: false,\n     status: false,\n     toolbar:[\n           \"heading\", \"bold\", \"italic\", \"strikethrough\",\n           \"|\", \"quote\", \"code\",\n           \"|\", \"unordered-list\", \"ordered-list\",\n           \"|\", \"clean-block\",\n           \"|\", \"link\", \"image\",\n           \"|\", \"table\",\n           \"|\", \"preview\", \"side-by-side\", \"fullscreen\"\n           ],\n   });\n\n  window.simplemde.toggleFullScreen();\n\n  simplemde.codemirror.on(\"change\", function(){\n    if(!ignoreTextChange) {\n      lastValue = simplemde.value();\n      workingNote.content.text = lastValue;\n      componentManager.saveItem(workingNote);\n    }\n  });\n\n});\n"]}